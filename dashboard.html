<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'wasm-unsafe-eval';
    connect-src 'self' https: wss:;
    img-src 'self' data: blob:;
    style-src 'self' 'unsafe-inline';
    font-src 'self' data:;
    media-src 'self' blob: mediastream:;
  ">
  <title>CallSteer Dashboard</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <!-- Login Screen (shown when not logged in) -->
  <div class="login-screen" id="login-screen" style="display: none;">
    <div class="login-container">
      <div class="login-brand">
        <svg class="logo-icon" viewBox="0 0 64 64" width="48" height="48">
          <defs>
            <linearGradient id="loginLogoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#00C8D4"/>
              <stop offset="100%" stop-color="#00E0E6"/>
            </linearGradient>
          </defs>
          <path d="M32 6C23 6 16 13 16 22c0 11 16 32 16 32s16-21 16-32c0-9-7-16-16-16z" fill="url(#loginLogoGrad)"/>
          <circle cx="32" cy="22" r="6" fill="#0a0a0f"/>
          <path d="M42 12c3.5 3.5 5.5 8 5.5 13" stroke="url(#loginLogoGrad)" stroke-width="2.5" stroke-linecap="round" fill="none" opacity="0.9"/>
          <path d="M46 8c5 5 8 11.5 8 18.5" stroke="url(#loginLogoGrad)" stroke-width="2.5" stroke-linecap="round" fill="none" opacity="0.7"/>
          <path d="M50 4c6.5 6.5 10 15 10 24" stroke="url(#loginLogoGrad)" stroke-width="2.5" stroke-linecap="round" fill="none" opacity="0.5"/>
        </svg>
        <h1><span class="brand-name">CALLSTEER</span><span class="brand-ai">.AI</span></h1>
        <p>Real-time sales coaching</p>
      </div>
      <form class="login-form" id="dashboard-login-form">
        <div class="login-input-group">
          <label for="dashboard-client-code">Company Code</label>
          <input type="text" id="dashboard-client-code" placeholder="6-character code" maxlength="6" required>
        </div>
        <div class="login-input-group">
          <label for="dashboard-rep-id">Rep ID</label>
          <input type="text" id="dashboard-rep-id" placeholder="e.g. REP-A1B2C3" maxlength="20" required>
        </div>
        <div class="login-input-group">
          <label for="dashboard-pin">PIN</label>
          <div class="password-input-wrapper">
            <input type="password" id="dashboard-pin" placeholder="6-digit PIN" maxlength="6" inputmode="numeric" pattern="[0-9]*" required>
            <button type="button" class="password-toggle" onclick="togglePassword('dashboard-pin', this)" aria-label="Show PIN">
              <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              <svg class="eye-off-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                <line x1="1" y1="1" x2="23" y2="23"/>
              </svg>
            </button>
          </div>
        </div>
        <p class="login-hint" style="font-size: 11px; color: rgba(255,255,255,0.5); margin: -8px 0 12px; text-align: center;">Get your Rep ID and PIN from your manager</p>
        <div class="caps-lock-warning" id="dashboard-caps-lock-warning" style="display: none;">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 9v4M12 17h.01M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
          </svg>
          <span>Caps Lock is on</span>
        </div>
        <div class="login-error" id="dashboard-login-error"></div>
        <button type="submit" class="btn-login" id="dashboard-login-btn">Sign In</button>
      </form>
    </div>
  </div>

  <div class="dashboard" id="dashboard-main">
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
      <div class="sidebar-brand">
        <svg class="logo-icon" viewBox="0 0 64 64" width="32" height="32">
          <defs>
            <linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#00C8D4"/>
              <stop offset="100%" stop-color="#00E0E6"/>
            </linearGradient>
          </defs>
          <path d="M32 6C23 6 16 13 16 22c0 11 16 32 16 32s16-21 16-32c0-9-7-16-16-16z" fill="url(#logoGrad)"/>
          <circle cx="32" cy="22" r="6" fill="#0a0a0f"/>
          <path d="M42 12c3.5 3.5 5.5 8 5.5 13" stroke="url(#logoGrad)" stroke-width="2.5" stroke-linecap="round" fill="none" opacity="0.9"/>
          <path d="M46 8c5 5 8 11.5 8 18.5" stroke="url(#logoGrad)" stroke-width="2.5" stroke-linecap="round" fill="none" opacity="0.7"/>
          <path d="M50 4c6.5 6.5 10 15 10 24" stroke="url(#logoGrad)" stroke-width="2.5" stroke-linecap="round" fill="none" opacity="0.5"/>
        </svg>
        <span class="brand-text"><span class="brand-name">CALLSTEER</span><span class="brand-ai">.AI</span></span>
      </div>

      <ul class="nav-tabs">
        <li class="nav-tab active" data-tab="home">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
            <polyline points="9 22 9 12 15 12 15 22"/>
          </svg>
          <span>Home</span>
        </li>
        <li class="nav-tab" data-tab="performance">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="20" x2="18" y2="10"/>
            <line x1="12" y1="20" x2="12" y2="4"/>
            <line x1="6" y1="20" x2="6" y2="14"/>
          </svg>
          <span>Performance</span>
        </li>
        <li class="nav-tab" data-tab="leaderboard">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="8" r="6"/>
            <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/>
          </svg>
          <span>Leaderboard</span>
        </li>
        <li class="nav-tab" data-tab="playbook">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
            <line x1="8" y1="6" x2="16" y2="6"/>
            <line x1="8" y1="10" x2="16" y2="10"/>
            <line x1="8" y1="14" x2="12" y2="14"/>
          </svg>
          <span>Playbook</span>
        </li>
        <li class="nav-tab" data-tab="tutorial">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          <span>Tutorial</span>
        </li>
        <li class="nav-tab" data-tab="settings">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
          <span>Settings</span>
        </li>
      </ul>

      <div class="sidebar-footer">
        <div class="user-info">
          <span class="user-name" id="sidebar-user-name">Rep Name</span>
          <span class="company-name" id="sidebar-company-name">Company</span>
        </div>
      </div>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Home Tab -->
      <div class="tab-content active" id="tab-home">
        <div class="content-header">
          <h1>Welcome back, <span id="home-user-name">Rep</span>!</h1>
          <p class="subtitle">Ready to close some deals?</p>
        </div>

        <!-- Launch Widget CTA -->
        <div class="launch-widget-section">
          <button class="btn-launch-widget" id="btn-launch-widget">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
            Launch Widget
          </button>
          <p class="launch-hint">Opens the floating coaching widget for your calls</p>
        </div>

        <!-- Today's Stats -->
        <div class="stats-section">
          <h2>Today's Performance</h2>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value" id="stat-today-nudges">0</div>
              <div class="stat-label">Nudges</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="stat-today-used">0</div>
              <div class="stat-label">Used</div>
            </div>
            <div class="stat-card highlight">
              <div class="stat-value" id="stat-today-adoption">0%</div>
              <div class="stat-label">Adoption</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="stat-today-streak">0</div>
              <div class="stat-label">Streak</div>
            </div>
          </div>
        </div>

        <!-- Rank Banner -->
        <div class="rank-banner" id="rank-banner">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="8" r="6"/>
            <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/>
          </svg>
          <span>You're <strong>#<span id="home-rank">-</span></strong> on the team today!</span>
        </div>

        <!-- Recent Activity -->
        <div class="recent-activity-section">
          <h2>Recent Activity</h2>
          <div class="activity-list" id="activity-list">
            <div class="activity-empty">No activity yet today. Launch the widget to start!</div>
          </div>
        </div>
      </div>

      <!-- Performance Tab -->
      <div class="tab-content" id="tab-performance">
        <div class="content-header">
          <h1>Performance</h1>
          <p class="subtitle">Your stats and trends</p>
        </div>

        <!-- Time Period Filter -->
        <div class="period-filter">
          <button class="period-btn active" data-period="today">Today</button>
          <button class="period-btn" data-period="week">This Week</button>
          <button class="period-btn" data-period="month">This Month</button>
          <button class="period-btn" data-period="all">All Time</button>
        </div>

        <!-- Performance Stats Grid -->
        <div class="perf-stats-section">
          <div class="perf-stats-grid">
            <div class="perf-stat-card">
              <div class="perf-stat-icon">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
              </div>
              <div class="perf-stat-value" id="perf-total-nudges">0</div>
              <div class="perf-stat-label">Nudges Shown</div>
            </div>
            <div class="perf-stat-card">
              <div class="perf-stat-icon success">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
              <div class="perf-stat-value" id="perf-nudges-used">0</div>
              <div class="perf-stat-label">Nudges Used</div>
            </div>
            <div class="perf-stat-card highlight">
              <div class="perf-stat-icon">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                </svg>
              </div>
              <div class="perf-stat-value" id="perf-adoption-rate">0%</div>
              <div class="perf-stat-label">Adoption Rate</div>
            </div>
            <div class="perf-stat-card">
              <div class="perf-stat-icon warning">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                </svg>
              </div>
              <div class="perf-stat-value" id="perf-current-streak">0</div>
              <div class="perf-stat-label">Day Streak</div>
            </div>
          </div>
        </div>

        <!-- Category Breakdown -->
        <div class="category-section">
          <h2>Category Breakdown</h2>
          <div class="category-grid" id="category-grid">
            <div class="category-card">
              <div class="category-header">
                <span class="category-name">Price</span>
                <span class="category-count" id="cat-price">0</span>
              </div>
              <div class="category-bar">
                <div class="category-fill" id="cat-price-bar" style="width: 0%"></div>
              </div>
            </div>
            <div class="category-card">
              <div class="category-header">
                <span class="category-name">Timing</span>
                <span class="category-count" id="cat-timing">0</span>
              </div>
              <div class="category-bar">
                <div class="category-fill" id="cat-timing-bar" style="width: 0%"></div>
              </div>
            </div>
            <div class="category-card">
              <div class="category-header">
                <span class="category-name">Authority</span>
                <span class="category-count" id="cat-authority">0</span>
              </div>
              <div class="category-bar">
                <div class="category-fill" id="cat-authority-bar" style="width: 0%"></div>
              </div>
            </div>
            <div class="category-card">
              <div class="category-header">
                <span class="category-name">Competition</span>
                <span class="category-count" id="cat-competition">0</span>
              </div>
              <div class="category-bar">
                <div class="category-fill" id="cat-competition-bar" style="width: 0%"></div>
              </div>
            </div>
            <div class="category-card">
              <div class="category-header">
                <span class="category-name">Trust</span>
                <span class="category-count" id="cat-trust">0</span>
              </div>
              <div class="category-bar">
                <div class="category-fill" id="cat-trust-bar" style="width: 0%"></div>
              </div>
            </div>
            <div class="category-card">
              <div class="category-header">
                <span class="category-name">Interest</span>
                <span class="category-count" id="cat-interest">0</span>
              </div>
              <div class="category-bar">
                <div class="category-fill" id="cat-interest-bar" style="width: 0%"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Insights Section -->
        <div class="insights-section">
          <h2>Insights</h2>
          <div class="insights-list" id="insights-list">
            <div class="insight-card">
              <div class="insight-icon">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="16" x2="12" y2="12"/>
                  <line x1="12" y1="8" x2="12.01" y2="8"/>
                </svg>
              </div>
              <div class="insight-text">Use more nudges to unlock personalized insights!</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Leaderboard Tab -->
      <div class="tab-content" id="tab-leaderboard">
        <div class="content-header">
          <h1>Leaderboard</h1>
          <p class="subtitle">Team rankings</p>
        </div>

        <!-- Leaderboard Filters -->
        <div class="leaderboard-filters">
          <div class="filter-group">
            <label>Time Period</label>
            <select id="lb-period-filter" class="filter-select">
              <option value="today">Today</option>
              <option value="week" selected>This Week</option>
              <option value="month">This Month</option>
              <option value="all">All Time</option>
            </select>
          </div>
          <div class="filter-group">
            <label>Metric</label>
            <select id="lb-metric-filter" class="filter-select">
              <option value="adoption" selected>Adoption Rate</option>
              <option value="nudges_used">Nudges Used</option>
              <option value="streak">Streak</option>
            </select>
          </div>
        </div>

        <!-- Your Position Banner -->
        <div class="your-position-banner" id="your-position-banner">
          <div class="position-medal">
            <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="8" r="6"/>
              <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/>
            </svg>
          </div>
          <div class="position-info">
            <span class="position-label">Your Position</span>
            <span class="position-rank" id="your-lb-rank">#-</span>
          </div>
          <div class="position-stat">
            <span class="position-stat-value" id="your-lb-value">0%</span>
            <span class="position-stat-label">Adoption</span>
          </div>
        </div>

        <!-- Leaderboard Table -->
        <div class="leaderboard-table-wrapper">
          <table class="leaderboard-table">
            <thead>
              <tr>
                <th class="col-rank">Rank</th>
                <th class="col-name">Rep</th>
                <th class="col-nudges">Nudges</th>
                <th class="col-used">Used</th>
                <th class="col-adoption">Adoption</th>
                <th class="col-streak">Streak</th>
              </tr>
            </thead>
            <tbody id="leaderboard-body">
              <tr class="loading-row">
                <td colspan="6">Loading leaderboard...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Playbook Tab -->
      <div class="tab-content" id="tab-playbook">
        <div class="content-header">
          <h1>Team Playbook</h1>
          <p class="subtitle">Your team's custom rebuttals - suggest new ones below</p>
        </div>

        <!-- Suggestion Actions -->
        <div class="playbook-actions">
          <button class="btn-suggest" id="btn-suggest-nudge">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
            </svg>
            Suggest a Rebuttal
          </button>
          <button class="btn-secondary" id="btn-my-suggestions">
            My Suggestions <span class="badge" id="my-suggestions-count" style="display: none;">0</span>
          </button>
        </div>

        <!-- Playbook Stats -->
        <div class="playbook-stats">
          <div class="stat-card">
            <div class="stat-value" id="playbook-total">0</div>
            <div class="stat-label">Team Nudges</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="playbook-active">0</div>
            <div class="stat-label">Active</div>
          </div>
          <div class="stat-card highlight">
            <div class="stat-value" id="playbook-adoption">0%</div>
            <div class="stat-label">Adoption Rate</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="playbook-triggered">0</div>
            <div class="stat-label">Times Triggered</div>
          </div>
        </div>

        <!-- Playbook List (Read-Only for Reps) -->
        <div class="playbook-list" id="playbook-list">
          <div class="playbook-empty" id="playbook-empty">
            <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
              <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
            </svg>
            <h3>No custom nudges yet</h3>
            <p>Your admin will add rebuttals here, or suggest one above!</p>
          </div>
          <!-- Nudges will be rendered here by JavaScript -->
        </div>
      </div>

      <!-- Suggestion Modal -->
      <div class="modal-overlay" id="suggestion-modal" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Suggest a Rebuttal</h2>
            <button class="modal-close" id="suggestion-modal-close">&times;</button>
          </div>
          <form id="suggestion-form">
            <div class="form-group">
              <label for="suggestion-trigger">What does the customer say?</label>
              <input type="text" id="suggestion-trigger" placeholder="e.g., 'That's too expensive', 'I need to think about it'" required>
              <span class="form-hint">The objection or phrase you want to handle</span>
            </div>
            <div class="form-group">
              <label for="suggestion-response">Your Suggested Response</label>
              <textarea id="suggestion-response" rows="4" placeholder="What do you say that works well?" required></textarea>
              <span class="form-hint">Share the rebuttal that's been working for you</span>
            </div>
            <div class="form-group">
              <label for="suggestion-category">Category (Optional)</label>
              <select id="suggestion-category">
                <option value="">Select category...</option>
                <option value="price">Price Objection</option>
                <option value="timing">Timing/Stall</option>
                <option value="competitor">Competitor Mention</option>
                <option value="authority">Decision Maker</option>
                <option value="trust">Trust/Credibility</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label for="suggestion-context">Why does this work? (Optional)</label>
              <textarea id="suggestion-context" rows="2" placeholder="Any context on when/why this response is effective..."></textarea>
            </div>
            <div class="form-actions">
              <button type="button" class="btn-secondary" id="btn-cancel-suggestion">Cancel</button>
              <button type="submit" class="btn-primary" id="btn-submit-suggestion">Submit for Review</button>
            </div>
          </form>
          <div id="suggestion-success" class="success-message" style="display: none;">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            <span>Suggestion submitted! Your admin will review it.</span>
          </div>
        </div>
      </div>

      <!-- My Suggestions Modal -->
      <div class="modal-overlay" id="my-suggestions-modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
          <div class="modal-header">
            <h2>My Suggestions</h2>
            <button class="modal-close" id="my-suggestions-close">&times;</button>
          </div>
          <div id="my-suggestions-list" class="suggestions-list">
            <div class="loading">Loading...</div>
          </div>
        </div>
      </div>

      <!-- Tutorial Tab -->
      <div class="tab-content" id="tab-tutorial">
        <div class="content-header">
          <h1>Tutorial</h1>
          <p class="subtitle">Learn how to use CallSteer</p>
        </div>

        <!-- Getting Started Section -->
        <div class="tutorial-section">
          <h2>Getting Started</h2>
          <div class="tutorial-steps">
            <div class="tutorial-step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h3>Launch the Widget</h3>
                <p>Click "Launch Widget" from the Home tab to open the floating coaching assistant.</p>
              </div>
            </div>
            <div class="tutorial-step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h3>Start Your Call</h3>
                <p>Begin your sales call. CallSteer will listen and detect objections in real-time.</p>
              </div>
            </div>
            <div class="tutorial-step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h3>Use the Nudges</h3>
                <p>When an objection is detected, you'll see coaching nudges. Click to copy and use them!</p>
              </div>
            </div>
            <div class="tutorial-step">
              <div class="step-number">4</div>
              <div class="step-content">
                <h3>Track Your Progress</h3>
                <p>Check the Performance tab to see your stats and improve over time.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- VB-Cable Setup Section -->
        <div class="tutorial-section">
          <h2>Audio Setup (VB-Cable)</h2>
          <p class="section-desc">For best results, set up VB-Cable to capture system audio:</p>
          <div class="setup-steps">
            <div class="setup-step">
              <div class="setup-step-header">
                <span class="setup-step-num">Step 1</span>
                <span class="setup-step-title">Download VB-Cable</span>
              </div>
              <p>Visit <a href="#" id="vb-cable-link" class="external-link">vb-audio.com/Cable</a> and download the free VB-Cable driver.</p>
            </div>
            <div class="setup-step">
              <div class="setup-step-header">
                <span class="setup-step-num">Step 2</span>
                <span class="setup-step-title">Install VB-Cable</span>
              </div>
              <p>Run the installer as Administrator. Restart your computer when prompted.</p>
            </div>
            <div class="setup-step">
              <div class="setup-step-header">
                <span class="setup-step-num">Step 3</span>
                <span class="setup-step-title">Configure Sound Settings</span>
              </div>
              <p>Open Sound Settings and set VB-Cable as your default playback device, or use "Listen" feature.</p>
              <button class="btn-secondary" id="btn-open-sound-settings">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                  <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                  <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                </svg>
                Open Sound Settings
              </button>
            </div>
            <div class="setup-step">
              <div class="setup-step-header">
                <span class="setup-step-num">Step 4</span>
                <span class="setup-step-title">Select in Widget</span>
              </div>
              <p>In the CallSteer widget, select "VB-Cable Output" as your customer audio source.</p>
            </div>
          </div>
        </div>

        <!-- FAQ Section -->
        <div class="tutorial-section">
          <h2>FAQ</h2>
          <div class="faq-list">
            <div class="faq-item">
              <div class="faq-question" data-faq="1">
                <span>Why can't I hear customer audio?</span>
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </div>
              <div class="faq-answer" id="faq-1">
                <p>Make sure you've set up VB-Cable correctly and selected the right audio source in the widget. Check that your call app is using VB-Cable for output.</p>
              </div>
            </div>
            <div class="faq-item">
              <div class="faq-question" data-faq="2">
                <span>How accurate is objection detection?</span>
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </div>
              <div class="faq-answer" id="faq-2">
                <p>CallSteer uses a hybrid AI system combining instant pattern matching and Claude AI analysis. It catches price, timing, authority, competitor, and trust objections with high accuracy. The AI safety net ensures variations are caught even if they don't match exact phrases.</p>
              </div>
            </div>
            <div class="faq-item">
              <div class="faq-question" data-faq="3">
                <span>Is my call data stored?</span>
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </div>
              <div class="faq-answer" id="faq-3">
                <p>Audio is processed in real-time and not permanently stored. Transcripts and nudge history are saved to power your performance dashboard and will enable post-call coaching features in the future.</p>
              </div>
            </div>
            <div class="faq-item">
              <div class="faq-question" data-faq="4">
                <span>Can I customize the nudges?</span>
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </div>
              <div class="faq-answer" id="faq-4">
                <p>Your company's DNA (pricing, competitors, value props) is already built into every nudge. Full custom playbook integration - where managers can add their own winning rebuttals - is coming soon!</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Tab -->
      <div class="tab-content" id="tab-settings">
        <div class="content-header">
          <h1>Settings</h1>
          <p class="subtitle">Configure your preferences</p>
        </div>

        <!-- Account Section -->
        <div class="settings-section">
          <h2>Account</h2>
          <div class="settings-card">
            <div class="setting-row">
              <div class="setting-label">
                <span class="setting-name">Name</span>
                <span class="setting-desc">Your display name</span>
              </div>
              <div class="setting-value" id="settings-name">-</div>
            </div>
            <div class="setting-row">
              <div class="setting-label">
                <span class="setting-name">Company</span>
                <span class="setting-desc">Your organization</span>
              </div>
              <div class="setting-value" id="settings-company">-</div>
            </div>
            <div class="setting-row">
              <div class="setting-label">
                <span class="setting-name">Client Code</span>
                <span class="setting-desc">Your unique identifier</span>
              </div>
              <div class="setting-value code" id="settings-client-code">-</div>
            </div>
          </div>
        </div>

        <!-- Preferences Section -->
        <div class="settings-section">
          <h2>Preferences</h2>
          <div class="settings-card">
            <div class="setting-row clickable" id="setting-notifications">
              <div class="setting-label">
                <span class="setting-name">Sound Notifications</span>
                <span class="setting-desc">Play sound when nudge appears</span>
              </div>
              <div class="setting-toggle">
                <input type="checkbox" id="toggle-notifications" checked>
                <label for="toggle-notifications" class="toggle-label"></label>
              </div>
            </div>
            <div class="setting-row clickable" id="setting-auto-copy">
              <div class="setting-label">
                <span class="setting-name">Auto-Copy Nudges</span>
                <span class="setting-desc">Automatically copy nudge to clipboard on click</span>
              </div>
              <div class="setting-toggle">
                <input type="checkbox" id="toggle-auto-copy" checked>
                <label for="toggle-auto-copy" class="toggle-label"></label>
              </div>
            </div>
            <div class="setting-row clickable" id="setting-always-on-top">
              <div class="setting-label">
                <span class="setting-name">Widget Always On Top</span>
                <span class="setting-desc">Keep widget above other windows</span>
              </div>
              <div class="setting-toggle">
                <input type="checkbox" id="toggle-always-on-top" checked>
                <label for="toggle-always-on-top" class="toggle-label"></label>
              </div>
            </div>
          </div>
        </div>

        <!-- App Info Section -->
        <div class="settings-section">
          <h2>About</h2>
          <div class="settings-card">
            <div class="setting-row">
              <div class="setting-label">
                <span class="setting-name">Version</span>
                <span class="setting-desc">Current app version</span>
              </div>
              <div class="setting-value" id="settings-version">-</div>
            </div>
            <div class="setting-row clickable" id="setting-check-updates">
              <div class="setting-label">
                <span class="setting-name">Check for Updates</span>
                <span class="setting-desc">See if a newer version is available</span>
              </div>
              <div class="setting-action">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="1 4 1 10 7 10"/>
                  <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                </svg>
              </div>
            </div>
          </div>
        </div>

        <!-- Logout Section -->
        <div class="settings-section">
          <button class="btn-logout" id="btn-logout">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
              <polyline points="16 17 21 12 16 7"/>
              <line x1="21" y1="12" x2="9" y2="12"/>
            </svg>
            Sign Out
          </button>
        </div>
      </div>
    </main>
  </div>

  <script src="dashboard.js"></script>
</body>
</html>
